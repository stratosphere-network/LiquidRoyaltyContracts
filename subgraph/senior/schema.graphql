type User @entity {
  id: ID!
  totalDeposited: BigInt!
  totalWithdrawn: BigInt!
  deposits: [Deposit!]! @derivedFrom(field: "user")
  withdrawals: [Withdrawal!]! @derivedFrom(field: "user")
  cooldowns: [Cooldown!]! @derivedFrom(field: "user")
  penalties: [Penalty!]! @derivedFrom(field: "user")
  lastActivityTimestamp: BigInt!
}

type Deposit @entity {
  id: ID!
  user: User!
  assets: BigInt!
  shares: BigInt!
  timestamp: BigInt!
  blockNumber: BigInt!
  transactionHash: Bytes!
}

type Withdrawal @entity {
  id: ID!
  user: User!
  assets: BigInt!
  shares: BigInt!
  timestamp: BigInt!
  blockNumber: BigInt!
  transactionHash: Bytes!
}

type Transfer @entity {
  id: ID!
  from: Bytes!
  to: Bytes!
  value: BigInt!
  timestamp: BigInt!
  blockNumber: BigInt!
  transactionHash: Bytes!
}

type Backstop @entity {
  id: ID!
  deficitAmount: BigInt!
  fromReserve: BigInt!
  fromJunior: BigInt!
  fullyRestored: Boolean!
  timestamp: BigInt!
  blockNumber: BigInt!
  transactionHash: Bytes!
}

type Spillover @entity {
  id: ID!
  excessAmount: BigInt!
  toJunior: BigInt!
  toReserve: BigInt!
  timestamp: BigInt!
  blockNumber: BigInt!
  transactionHash: Bytes!
}

type Cooldown @entity {
  id: ID!
  user: User!
  timestamp: BigInt!
  blockNumber: BigInt!
  transactionHash: Bytes!
}

type Penalty @entity {
  id: ID!
  user: User!
  penalty: BigInt!
  timestamp: BigInt!
  blockNumber: BigInt!
  transactionHash: Bytes!
}

type VaultValue @entity {
  id: ID!
  oldValue: BigInt!
  newValue: BigInt!
  profitBps: BigInt!
  timestamp: BigInt!
  blockNumber: BigInt!
  transactionHash: Bytes!
}

type FeeCollection @entity {
  id: ID!
  managementFee: BigInt!
  performanceFee: BigInt!
  timestamp: BigInt!
  blockNumber: BigInt!
  transactionHash: Bytes!
}

type BGTClaim @entity {
  id: ID!
  recipient: Bytes!
  amount: BigInt!
  timestamp: BigInt!
  blockNumber: BigInt!
  transactionHash: Bytes!
}

type ProtocolStats @entity {
  id: ID!
  totalDeposits: BigInt!
  totalWithdrawals: BigInt!
  totalUsers: Int!
  totalBackstops: Int!
  totalSpillovers: Int!
  lastUpdateTimestamp: BigInt!
}

